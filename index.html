<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TC表示スケジュール</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f9f9f9;
      padding: 10px;
    }
    h1 {
      font-size: 30px;
      margin-bottom: 20px;
    }
    .zone {
      margin-bottom: 40px;
    }
    .zone-title {
      font-size: 24px;
      font-weight: bold;
    }
    .status {
      font-size: 28px;
      margin: 10px;
      color: green;
    }
    .next {
      font-size: 30px;
      color: blue;
      font-weight: bold;
    }
    .live {
      color: red;
    }
    #schedule-container {
      display: none;
    }
    #password-container {
      text-align: center;
      margin-top: 100px;
    }
  </style>
</head>
<body>

  <div id="password-container">
    <h1>パスワードを入力してください</h1>
    <input type="password" id="password" placeholder="パスワード" />
    <button onclick="checkPassword()">ログイン</button>
  </div>

  <div id="schedule-container">
    <h1 id="current-time">現在時刻: --:--:--</h1>

    <div class="zone">
      <div class="zone-title">Zone1</div>
      <div class="status" id="status-zone1"></div>
      <div class="next" id="next-zone1"></div>
    </div>

    <div class="zone">
      <div class="zone-title">Zone2</div>
      <div class="status" id="status-zone2"></div>
      <div class="next" id="next-zone2"></div>
    </div>

    <div class="zone">
      <div class="zone-title">Zone3</div>
      <div class="status" id="status-zone3"></div>
      <div class="next" id="next-zone3"></div>
    </div>
  </div>

<script>
// パスワード確認関数
function checkPassword() {
  const password = document.getElementById('password').value;
  const correctPassword = "Admin"; // 設定したいパスワードをここに記入

  if (password === correctPassword) {
    document.getElementById('password-container').style.display = 'none';
    document.getElementById('schedule-container').style.display = 'block';
  } else {
    alert('パスワードが間違っています。');
  }
}

// データ
const tc_schedule_zone1 = [
    {"time": "08:09:55", "status": "Test Run"},
    {"time": "08:45:25", "status": "Test Run"},
    {"time": "09:52:25", "status": "客入れあり"},
    {"time": "10:07:25", "status": "客入れあり"},
    {"time": "10:22:25", "status": "客入れあり"},
    {"time": "10:37:25", "status": "客入れなし"},
    {"time": "10:52:25", "status": "客入れあり"},
    {"time": "11:07:25", "status": "客入れあり"},
    {"time": "11:22:25", "status": "客入れあり"},
    {"time": "11:37:25", "status": "客入れなし"},
    {"time": "11:52:25", "status": "客入れあり"},
    {"time": "12:07:25", "status": "客入れあり"},
    {"time": "12:22:25", "status": "客入れあり"},
    {"time": "12:37:25", "status": "客入れなし"},
    {"time": "12:52:25", "status": "客入れあり"},
    {"time": "13:07:25", "status": "客入れあり"},
    {"time": "13:22:25", "status": "客入れあり"},
    {"time": "13:37:25", "status": "客入れなし"},
    {"time": "13:52:25", "status": "客入れあり"},
    {"time": "14:07:25", "status": "客入れあり"},
    {"time": "14:22:25", "status": "客入れあり"},
    {"time": "14:37:25", "status": "客入れなし"},
    {"time": "14:52:25", "status": "客入れあり"},
    {"time": "15:07:25", "status": "客入れあり"},
    {"time": "15:22:25", "status": "客入れあり"},
    {"time": "15:37:25", "status": "客入れなし"},
    {"time": "15:52:25", "status": "客入れあり"},
    {"time": "16:07:25", "status": "客入れあり"},
    {"time": "16:22:25", "status": "客入れあり"},
    {"time": "16:37:25", "status": "客入れなし"},
    {"time": "16:52:25", "status": "客入れあり"},
    {"time": "17:07:25", "status": "客入れあり"},
    {"time": "17:22:25", "status": "客入れあり"},
    {"time": "17:37:25", "status": "客入れなし"},
    {"time": "17:52:25", "status": "客入れあり"},
    {"time": "18:07:25", "status": "客入れあり"},
    {"time": "18:22:25", "status": "客入れあり"},
    {"time": "18:37:25", "status": "客入れなし"},
    {"time": "18:52:25", "status": "客入れあり"},
    {"time": "19:07:25", "status": "客入れあり"},
    {"time": "19:22:25", "status": "客入れあり"},
    {"time": "19:37:25", "status": "客入れなし"},
    {"time": "19:52:25", "status": "客入れあり"},
    {"time": "20:07:25", "status": "客入れあり"},
    {"time": "20:22:25", "status": "最終回"}]; 
const tc_schedule_zone2 = [
    {"time": "08:21:30", "status": "Test Run"},
    {"time": "08:57:00", "status": "Test Run"},
    {"time": "10:04:00", "status": "客入れあり"},
    {"time": "10:19:00", "status": "客入れあり"},
    {"time": "10:34:00", "status": "客入れあり"},
    {"time": "10:49:00", "status": "客入れなし"},
    {"time": "11:04:00", "status": "客入れあり"},
    {"time": "11:19:00", "status": "客入れあり"},
    {"time": "11:34:00", "status": "客入れあり"},
    {"time": "11:49:00", "status": "客入れなし"},
    {"time": "12:04:00", "status": "客入れあり"},
    {"time": "12:19:00", "status": "客入れあり"},
    {"time": "12:34:00", "status": "客入れあり"},
    {"time": "12:49:00", "status": "客入れなし"},
    {"time": "13:04:00", "status": "客入れあり"},
    {"time": "13:19:00", "status": "客入れあり"},
    {"time": "13:34:00", "status": "客入れあり"},
    {"time": "13:49:00", "status": "客入れなし"},
    {"time": "14:04:00", "status": "客入れあり"},
    {"time": "14:19:00", "status": "客入れあり"},
    {"time": "14:34:00", "status": "客入れあり"},
    {"time": "14:49:00", "status": "客入れなし"},
    {"time": "15:04:00", "status": "客入れあり"},
    {"time": "15:19:00", "status": "客入れあり"},
    {"time": "15:34:00", "status": "客入れあり"},
    {"time": "15:49:00", "status": "客入れなし"},
    {"time": "16:04:00", "status": "客入れあり"},
    {"time": "16:19:00", "status": "客入れあり"},
    {"time": "16:34:00", "status": "客入れあり"},
    {"time": "16:49:00", "status": "客入れなし"},
    {"time": "17:04:00", "status": "客入れあり"},
    {"time": "17:19:00", "status": "客入れあり"},
    {"time": "17:34:00", "status": "客入れあり"},
    {"time": "17:49:00", "status": "客入れなし"},
    {"time": "18:04:00", "status": "客入れあり"},
    {"time": "18:19:00", "status": "客入れあり"},
    {"time": "18:34:00", "status": "客入れあり"},
    {"time": "18:49:00", "status": "客入れなし"},
    {"time": "19:04:00", "status": "客入れあり"},
    {"time": "19:19:00", "status": "客入れあり"},
    {"time": "19:34:00", "status": "客入れあり"},
    {"time": "19:49:00", "status": "客入れなし"},
    {"time": "20:04:00", "status": "客入れあり"},
    {"time": "20:19:00", "status": "客入れあり"},
    {"time": "20:34:00", "status": "最終回"},];
const tc_schedule_zone3 = [
    {"time": "08:33:30", "status": "Test Run"},
    {"time": "09:09:00", "status": "Test Run"},
    {"time": "10:16:00", "status": "客入れあり"},
    {"time": "10:31:00", "status": "客入れあり"},
    {"time": "10:46:00", "status": "客入れあり"},
    {"time": "11:01:00", "status": "客入れなし"},
    {"time": "10:16:00", "status": "客入れあり"},
    {"time": "10:31:00", "status": "客入れあり"},
    {"time": "10:46:00", "status": "客入れあり"},
    {"time": "11:01:00", "status": "客入れなし"},
    {"time": "11:16:00", "status": "客入れあり"},
    {"time": "11:31:00", "status": "客入れあり"},
    {"time": "11:46:00", "status": "客入れあり"},
    {"time": "12:01:00", "status": "客入れなし"},
    {"time": "12:16:00", "status": "客入れあり"},
    {"time": "12:31:00", "status": "客入れあり"},
    {"time": "12:46:00", "status": "客入れあり"},
    {"time": "13:01:00", "status": "客入れなし"},
    {"time": "13:16:00", "status": "客入れあり"},
    {"time": "13:31:00", "status": "客入れあり"},
    {"time": "13:46:00", "status": "客入れあり"},
    {"time": "14:01:00", "status": "客入れなし"},
    {"time": "14:16:00", "status": "客入れあり"},
    {"time": "14:31:00", "status": "客入れあり"},
    {"time": "14:46:00", "status": "客入れあり"},
    {"time": "15:01:00", "status": "客入れなし"},
    {"time": "15:16:00", "status": "客入れあり"},
    {"time": "15:31:00", "status": "客入れあり"},
    {"time": "15:46:00", "status": "客入れあり"},
    {"time": "16:01:00", "status": "客入れなし"},
    {"time": "16:16:00", "status": "客入れあり"},
    {"time": "16:31:00", "status": "客入れあり"},
    {"time": "16:46:00", "status": "客入れあり"},
    {"time": "17:01:00", "status": "客入れなし"},
    {"time": "17:16:00", "status": "客入れあり"},
    {"time": "17:31:00", "status": "客入れあり"},
    {"time": "17:46:00", "status": "客入れあり"},
    {"time": "18:01:00", "status": "客入れなし"},
    {"time": "18:16:00", "status": "客入れあり"},
    {"time": "18:31:00", "status": "客入れあり"},
    {"time": "18:46:00", "status": "客入れあり"},
    {"time": "19:01:00", "status": "客入れなし"},
    {"time": "19:16:00", "status": "客入れあり"},
    {"time": "19:31:00", "status": "客入れあり"},
    {"time": "19:46:00", "status": "客入れあり"},
    {"time": "20:01:00", "status": "客入れなし"},
    {"time": "20:16:00", "status": "客入れあり"},
    {"time": "20:31:00", "status": "客入れあり"},
    {"time": "20:46:00", "status": "最終回"},];

// 時間のフォーマットを秒単位に変換
function timeToSeconds(timeStr) {
  const [h, m, s] = timeStr.split(":").map(Number);
  return h * 3600 + m * 60 + s;
}

// 次のインデックスを取得
function getNextIndex(nowSec, schedule) {
  for (let i = 0; i < schedule.length; i++) {
    if (timeToSeconds(schedule[i].time) > nowSec) {
      return i;
    }
  }
  return 0;
}

// 状態を取得
function getZoneStatus(schedule, nowSec, zoneType) {
  const durations = {
    'zone1': 690, // 11分30秒
    'zone2': 660, // 11分
    'zone3': 540, // 9分
  };

  for (let i = schedule.length - 1; i >= 0; i--) {
    const tcSec = timeToSeconds(schedule[i].time);
    const endSec = tcSec + durations[zoneType];

    if (tcSec <= nowSec && nowSec < endSec) {
      return { status: `本番中（${schedule[i].status}）`, live: true };
    }
  }
  return { status: "待機中", live: false };
}

// メインループ
function update() {
  const now = new Date();
  const nowStr = now.toTimeString().slice(0,8);
  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
  document.getElementById("current-time").textContent = `現在時刻: ${nowStr}`;

  // Zone1
  let idx1 = getNextIndex(nowSec, tc_schedule_zone1);
  const next1 = tc_schedule_zone1[idx1];
  const state1 = getZoneStatus(tc_schedule_zone1, nowSec, 'zone1');
  document.getElementById("status-zone1").textContent = state1.status;
  document.getElementById("status-zone1").className = state1.live ? "status live" : "status";
  document.getElementById("next-zone1").textContent = `Next TC Start ${next1.time} ・Status ${next1.status}`;

  // Zone2
  let idx2 = getNextIndex(nowSec, tc_schedule_zone2);
  const next2 = tc_schedule_zone2[idx2];
  const state2 = getZoneStatus(tc_schedule_zone2, nowSec, 'zone2');
  document.getElementById("status-zone2").textContent = state2.status;
  document.getElementById("status-zone2").className = state2.live ? "status live" : "status";
  document.getElementById("next-zone2").textContent = `Next TC Start ${next2.time} ・Status ${next2.status}`;

  // Zone3
  let idx3 = getNextIndex(nowSec, tc_schedule_zone3);
  const next3 = tc_schedule_zone3[idx3];
  const state3 = getZoneStatus(tc_schedule_zone3, nowSec, 'zone3');
  document.getElementById("status-zone3").textContent = state3.status;
  document.getElementById("status-zone3").className = state3.live ? "status live" : "status";
  document.getElementById("next-zone3").textContent = `Next TC Start ${next3.time} ・Status ${next3.status}`;
}

setInterval(update, 1000);
update();
</script>

</body>
</html>
